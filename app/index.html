<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Hunter - Web App</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/app.css">
    <link rel="icon" href="../images/favicon.ico" type="image/x-icon">
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TH7Y2W8GC4"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-TH7Y2W8GC4', {
        'page_title': 'Job Hunter Web App',
        'page_location': window.location.href
    });
    </script>
    <script src="../js/analytics.js"></script>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <img src="../images/logo.png" alt="Job Hunter Logo">
                <h1>Job Hunter</h1>
            </div>
            <div class="extension-promo">
                <a href="https://addons.mozilla.org/en-US/firefox/addon/job-hunter-assistant/" target="_blank" class="install-button">Install Extension</a>
            </div>
        </div>
    </header>

    <main class="app-container">
        <div class="tabs">
            <button class="tab-button active" data-tab="find">Find Jobs</button>
            <button class="tab-button" data-tab="apply">Apply</button>
            <button class="tab-button" data-tab="profile">Profile</button>
        </div>
        
        <!-- Find Jobs Tab -->
        <div id="find" class="tab-content active">
            <h2>Find Jobs</h2>
            <form id="job-search-form">
                <!-- Role input field -->
                <div class="form-group">
                    <label for="role" class="form-label">Role:</label>
                    <input type="text" id="role" name="role" class="form-input" placeholder="e.g. Software Engineer">
                </div>
                
                <!-- Location input field -->
                <div class="form-group">
                    <label for="location" class="form-label">Location:</label>
                    <input type="text" id="location" name="location" class="form-input" placeholder="e.g. London, UK">
                </div>

                <!-- Experience level select field -->
                <div class="form-group">
                    <label for="experience" class="form-label">Experience Level:</label>
                    <select id="experience" name="experience" class="form-select">
                        <option value="">Any Level</option>
                        <option value="entry">Entry Level</option>
                        <option value="mid">Mid-Level</option>
                        <option value="senior">Senior</option>
                        <option value="lead">Lead/Manager</option>
                    </select>
                </div>
            
                <!-- Hiring Phrases Section -->
                <div class="toggle-section">
                    <div class="toggle-header" id="show-hiring-phrases">
                        <span class="toggle-icon">▶</span>
                        <span>Hiring Phrases to Search</span>
                    </div>
                    <div class="toggle-content" id="hiring-phrases-options">
                        <div class="toggle-option">
                            <input type="checkbox" id="phrase-hiring" name="hiring-phrase" value="we are hiring" checked>
                            <label for="phrase-hiring">"we are hiring"</label>
                        </div>
                        <div class="toggle-option">
                            <input type="checkbox" id="phrase-team" name="hiring-phrase" value="join our team" checked>
                            <label for="phrase-team">"join our team"</label>
                        </div>
                        <div class="toggle-option">
                            <input type="checkbox" id="phrase-opening" name="hiring-phrase" value="job opening" checked>
                            <label for="phrase-opening">"job opening"</label>
                        </div>
                        <div class="toggle-option">
                            <input type="checkbox" id="phrase-position" name="hiring-phrase" value="open position" checked>
                            <label for="phrase-position">"open position"</label>
                        </div>
                        <div class="toggle-option">
                            <input type="checkbox" id="phrase-now-hiring" name="hiring-phrase" value="now hiring" checked>
                            <label for="phrase-now-hiring">"now hiring"</label>
                        </div>
                        <div class="toggle-option">
                            <input type="checkbox" id="phrase-looking" name="hiring-phrase" value="looking for" checked>
                            <label for="phrase-looking">"looking for"</label>
                        </div>
                        <div class="toggle-option">
                            <input type="checkbox" id="phrase-immediate" name="hiring-phrase" value="immediate opening" checked>
                            <label for="phrase-immediate">"immediate opening"</label>
                        </div>
                        <div class="toggle-option">
                            <input type="checkbox" id="phrase-opportunities" name="hiring-phrase" value="career opportunities" checked>
                            <label for="phrase-opportunities">"career opportunities"</label>
                        </div>
                        <div class="toggle-option">
                            <input type="checkbox" id="phrase-remote" name="hiring-phrase" value="remote opportunity" checked>
                            <label for="phrase-remote">"remote opportunity"</label>
                        </div>
                        <!-- Custom phrase input field -->
                        <div class="custom-option-input">
                            <input type="text" id="custom-phrase" class="form-input form-input-small" placeholder="Add your own phrase">
                            <button id="add-custom-phrase" type="button" class="default-button">Add</button>
                        </div>
                    </div>
                </div>

                <!-- Job Boards Section -->
                <div class="toggle-section">
                    <div class="toggle-header" id="show-job-boards">
                        <span class="toggle-icon">▶</span>
                        <span>Job Boards to Search</span>
                    </div>
                    <div class="toggle-content" id="job-boards-options">
                        <p class="options-tip">Select specific job boards to search or leave all unchecked to search all boards.</p>
                        <div class="toggle-option">
                            <input type="checkbox" id="board-lever" name="job-board" value="jobs.lever.co">
                            <label for="board-lever">Lever</label>
                        </div>
                        <div class="toggle-option">
                            <input type="checkbox" id="board-greenhouse" name="job-board" value="boards.greenhouse.io">
                            <label for="board-greenhouse">Greenhouse</label>
                        </div>
                        <div class="toggle-option">
                            <input type="checkbox" id="board-workable" name="job-board" value="apply.workable.com">
                            <label for="board-workable">Workable</label>
                        </div>
                        <div class="toggle-option">
                            <input type="checkbox" id="board-ashby" name="job-board" value="ashbyhq.com">
                            <label for="board-ashby">Ashby</label>
                        </div>
                        <div class="toggle-option">
                            <input type="checkbox" id="board-smart" name="job-board" value="jobs.smartrecruiters.com">
                            <label for="board-smart">SmartRecruiters</label>
                        </div>
                    </div>
                </div>
                
                <!-- Document Sites Section -->
                <div class="toggle-section">
                    <div class="toggle-header" id="show-doc-sites">
                        <span class="toggle-icon">▶</span>
                        <span>Document Sites to Search</span>
                    </div>
                    <div class="toggle-content" id="doc-sites-options">
                        <p class="options-tip">Select specific document sites to search or leave all unchecked to search all sites.</p>
                        <div class="toggle-option">
                            <input type="checkbox" id="site-google" name="doc-site" value="docs.google.com">
                            <label for="site-google">Google Docs</label>
                        </div>
                        <div class="toggle-option">
                            <input type="checkbox" id="site-notion" name="doc-site" value="notion.site">
                            <label for="site-notion">Notion</label>
                        </div>
                        <div class="toggle-option">
                            <input type="checkbox" id="site-coda" name="doc-site" value="coda.io">
                            <label for="site-coda">Coda</label>
                        </div>
                    </div>
                </div>
                
                <div class="search-buttons">
                    <button type="button" id="search-linkedin">Find on LinkedIn</button>
                    <button type="button" id="search-linkedin-feed">Find on LinkedIn Feed</button>
                    <button type="button" id="search-google">Find on Job Boards</button>
                    <button type="button" id="search-docs">Find in Docs and Pages</button>
                    <button type="button" id="search-ai">Find with AI</button>
                </div>
            </form>
        </div>
        
        <!-- Apply Tab -->
        <div id="apply" class="tab-content">
            <h2>Saved Job Postings</h2>
            
            <div class="job-entry-section">
                <h3>Add a New Job</h3>
                <p class="info-text">Copy job details from any job posting and paste them here.</p>
                
                <form id="job-entry-form">
                    <!-- Job entry form fields -->
                    <div class="form-group">
                        <label for="job-title" class="form-label">Job Title:</label>
                        <input type="text" id="job-title" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="job-company" class="form-label">Company:</label>
                        <input type="text" id="job-company" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="job-location" class="form-label">Location:</label>
                        <input type="text" id="job-location" class="form-input" placeholder="e.g. Remote, London, New York">
                    </div>
                    <div class="form-group">
                        <label for="job-url" class="form-label">Job URL (optional):</label>
                        <input type="url" id="job-url" class="form-input form-url-input" placeholder="e.g. https://company.com/jobs/position">
                    </div>
                    <div class="form-group">
                        <label for="job-description" class="form-label">Job Description:</label>
                        <textarea id="job-description" class="form-textarea" rows="10" required placeholder="Paste the full job description here..."></textarea>
                    </div>
                    <button type="submit" id="save-job-btn" class="primary-button">Save Job</button>
                </form>
            </div>
            
            <div class="saved-jobs-section">
                <h3>Your Saved Jobs</h3>
                <div class="refresh-section">
                    <button id="refresh-jobs" class="refresh-button" title="Refresh job list">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M23 4v6h-6"></path>
                        <path d="M1 20v-6h6"></path>
                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10"></path>
                        <path d="M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                      </svg>
                      Refresh
                    </button>
                  </div>
                
                <div id="saved-jobs-list">
                    <!-- Jobs will be listed here dynamically -->
                    <div class="empty-state">No saved jobs yet.</div>
                </div>
                
                <div id="job-actions" class="hidden">
                    <button id="generate-application" class="primary-button">Generate Application</button>
                    <button id="interview-prep" class="secondary-button">Interview Prep</button>
                    <button id="remove-job" class="danger-button">Remove</button>
                </div>
            </div>
        </div>
        
        <!-- Profile Tab -->
        <div id="profile" class="tab-content">
            <h2>Your Profile</h2>
            
            <!-- CV textarea in profile tab -->
            <div class="form-group">
                <label for="cv" class="form-label">Your CV/Resume:</label>
                <textarea id="cv" name="cv" class="form-textarea" rows="15" placeholder="Paste your CV or resume text here..."></textarea>
                <p class="form-info">This information will be used to generate tailored applications for jobs you save.</p>
                <button id="save-profile" class="primary-button">Save Profile</button>
            </div>

            <!-- JSON input in profile tab -->
            <div class="form-group">
                <label for="cv-json" class="form-label">Tailored CV JSON:</label>
                <textarea id="cv-json" name="cv-json" class="form-textarea" rows="5" placeholder="Paste the JSON from Claude here..."></textarea>
                <p class="form-info">After generating an application with Claude, paste the JSON response here to preview your CV.</p>
                <button id="preview-cv" class="primary-button">Preview CV</button>
            </div>
            
            <!-- Export/Import section will be added by setupExportImport() in ui.js -->
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <img src="../images/logo-small.png" alt="Job Hunter Logo">
                <span>Job Hunter</span>
            </div>
            <div class="footer-links">
                <!-- Footer links -->
            </div>
        </div>
        <div class="copyright">
            <p>&copy; <span id="current-year"></span> Job Hunter. All rights reserved.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Track that user accessed the web app
        document.addEventListener('DOMContentLoaded', function() {
          if (typeof trackEvent === 'function') {
            trackEvent('web_app_access', {
              referrer: document.referrer
            });
          } else {
            console.error('trackEvent function not available. Check analytics.js implementation.');
          }
        });
    </script>
    <script src="js/storage.js"></script>
    <script src="js/unified-tracking.js"></script>
    <script src="js/tracking.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/search.js"></script>
    <script src="js/prompts.js"></script>
    <script src="js/app.js"></script>
</body>
</html>